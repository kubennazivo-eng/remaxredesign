<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RE/MAX Slovakia | Reality, ktoré hýbu svetom</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- 1. CORE VARIABLES & RESET --- */
        :root {
            --brand-blue: #003DA5;
            --brand-red: #DC1C2E;
            --brand-white: #FFFFFF;
            --brand-gray: #F4F6F8;
            --text-main: #1A1A1A;
            --text-light: #555555;
            --container-width: 1280px;
            --radius: 8px;
            --shadow: 0 4px 15px rgba(0,0,0,0.08);
            --transition: all 0.3s ease;
            --success-color: #10B981;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        
        body {
            font-family: 'Open Sans', sans-serif;
            color: var(--text-main);
            background-color: #fff;
            overflow-x: hidden;
            line-height: 1.6;
            padding-top: 80px;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        /* PC Cursor */
        @media (min-width: 992px) {
             body {
                cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 152 192"><path fill="%23003DA5" d="M76 0C34 0 0 34 0 76c0 42 34 76 76 76s76-34 76-76C152 34 118 0 76 0z"/><path fill="%23DC1C2E" d="M76 152c-16 0-31-5-43-14l33 49c3 4 8 4 10 0l33-49c-12 9-27 14-43 14z"/><path fill="%23FFF" d="M36 76h80v12H36z"/></svg>') 16 16, auto;
             }
        }

        input, textarea, select { user-select: text; -webkit-user-select: text; }

        h1, h2, h3, h4 { font-family: 'Montserrat', sans-serif; font-weight: 700; color: var(--brand-blue); }
        a { text-decoration: none; color: inherit; transition: var(--transition); cursor: pointer; }
        ul { list-style: none; }
        .container { max-width: var(--container-width); margin: 0 auto; padding: 0 20px; }
        .hidden { display: none !important; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes scaleIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        /* Buttons */
        .btn {
            display: inline-flex; align-items: center; justify-content: center; gap: 8px;
            padding: 12px 28px; border-radius: 50px; font-weight: 700; text-transform: uppercase;
            font-size: 0.9rem; cursor: pointer; transition: var(--transition); border: none; font-family: 'Montserrat', sans-serif;
        }
        .btn:active { transform: scale(0.96); }
        .btn-primary { background: var(--brand-red); color: white; box-shadow: 0 4px 10px rgba(220, 28, 46, 0.3); }
        .btn-primary:hover { background: #b01524; transform: translateY(-2px); }
        .btn-secondary { background: var(--brand-blue); color: white; }
        .btn-secondary:hover { background: #002a75; transform: translateY(-2px); }
        .btn-outline { background: transparent; border: 2px solid var(--brand-blue); color: var(--brand-blue); }
        .btn-outline:hover { background: var(--brand-blue); color: white; }
        .btn-white { background: white; color: var(--brand-blue); font-weight: 800; }
        .btn-white:hover { background: #f0f0f0; transform: translateY(-2px); }

        .form-control {
            width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px;
            font-family: inherit; font-size: 0.95rem; transition: 0.3s;
        }
        .form-control:focus { outline: none; border-color: var(--brand-blue); box-shadow: 0 0 0 3px rgba(0, 61, 165, 0.1); }

        /* --- TOAST NOTIFICATIONS --- */
        #toast-container {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
            z-index: 10000; display: flex; flex-direction: column; gap: 10px; pointer-events: none;
            width: 90%; max-width: 400px;
        }
        .toast {
            background: #111; color: white; padding: 16px 24px; border-radius: 50px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.3); font-size: 0.9rem; font-weight: 600;
            display: flex; align-items: center; gap: 15px; justify-content: center;
            animation: toastSlideUp 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
            opacity: 0; pointer-events: auto;
        }
        .toast i { color: var(--success-color); font-size: 1.2rem; }
        .toast.hide { animation: toastFadeOut 0.4s forwards; }

        @keyframes toastSlideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes toastFadeOut { from { opacity: 1; transform: translateY(0); } to { opacity: 0; transform: translateY(10px); } }

        /* --- HEADER --- */
        header {
            position: fixed; top: 0; width: 100%; z-index: 1000;
            background: rgba(255, 255, 255, 0.98); backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(0,0,0,0.05); height: 80px;
        }
        .nav-container { height: 100%; display: flex; justify-content: space-between; align-items: center; }
        .logo { display: flex; align-items: center; gap: 10px; font-size: 1.4rem; font-weight: 800; color: var(--brand-blue); }
        .logo span { color: var(--brand-red); }
        .logo svg { height: 35px; }
        .main-menu { display: flex; gap: 20px; align-items: center; }
        .menu-link { font-weight: 600; color: var(--text-main); position: relative; padding: 10px 0; font-size: 0.9rem; }
        .menu-link::after { content: ''; position: absolute; bottom: 0; left: 0; width: 0; height: 2px; background: var(--brand-red); transition: 0.3s; }
        .menu-link:hover::after, .menu-link.active::after { width: 100%; }
        .menu-link.active { color: var(--brand-blue); }
        .mobile-toggle { display: none; font-size: 1.5rem; color: var(--brand-blue); cursor: pointer; padding: 10px; }
        
        .mobile-nav-overlay {
            position: fixed; inset: 0; background: white; z-index: 1100;
            display: flex; flex-direction: column; padding: 30px;
            transform: translateX(100%); transition: transform 0.3s ease-in-out;
        }
        .mobile-nav-overlay.active { transform: translateX(0); }
        .mobile-nav-links { display: flex; flex-direction: column; gap: 20px; margin-top: 40px; font-size: 1.2rem; font-weight: 700; }
        .mobile-nav-links a { border-bottom: 1px solid #eee; padding-bottom: 10px; }

        .page-section { animation: fadeIn 0.5s ease-out; }

        /* --- HERO --- */
        .hero {
            height: 80vh; min-height: 500px; display: flex; align-items: center; justify-content: center;
            background: linear-gradient(rgba(0, 61, 165, 0.7), rgba(0, 30, 80, 0.8)), 
                        url('https://images.unsplash.com/photo-1560518883-ce09059eeffa?q=80&w=2000');
            background-size: cover; background-position: center; color: white; text-align: center; position: relative;
        }
        .hero h1 { font-size: 3rem; line-height: 1.2; margin-bottom: 20px; color: white; }
        .hero-balloon { position: absolute; right: 10%; top: 20%; width: 150px; opacity: 0.8; animation: floatBalloon 6s infinite; }
        @keyframes floatBalloon { 0%,100%{transform:translateY(0) rotate(0deg)} 50%{transform:translateY(-20px) rotate(5deg)} }

        /* --- PROMO BANNER --- */
        .promo-banner {
            background: var(--brand-red); color: white;
            border-radius: var(--radius); margin: 40px auto 0;
            position: relative; overflow: hidden;
            display: flex; align-items: center;
            box-shadow: 0 10px 30px rgba(220, 28, 46, 0.25);
            max-width: 1000px;
        }
        .promo-text-content { padding: 50px; flex: 1; position: relative; z-index: 2; }
        .promo-banner h2 { color: white; font-size: 2rem; line-height: 1.2; margin-bottom: 15px; font-weight: 800; }
        .promo-banner p { font-size: 1.1rem; margin-bottom: 25px; opacity: 0.95; }
        .promo-image { 
            width: 40%; height: 350px; background: url('https://images.unsplash.com/photo-1582407947304-fd86f028f716?q=80&w=800&auto=format&fit=crop') center/cover no-repeat;
            clip-path: polygon(20% 0, 100% 0, 100% 100%, 0% 100%);
        }
        .promo-banner::before {
            content: ''; position: absolute; left: -50px; top: -50px; width: 150px; height: 150px;
            background: rgba(255,255,255,0.1); border-radius: 50%;
        }

        /* --- LISTINGS --- */
        .listings-wrapper { padding: 40px 0; background: var(--brand-gray); }
        .listing-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 30px; }
        
        .card { 
            background: white; border-radius: var(--radius); overflow: hidden; box-shadow: var(--shadow); 
            transition: 0.3s; cursor: pointer; display: flex; flex-direction: column; 
        }
        .card:hover { transform: translateY(-5px); box-shadow: 0 15px 30px rgba(0,0,0,0.1); }
        .card-img-wrap { height: 220px; position: relative; overflow: hidden; }
        .card-img { width: 100%; height: 100%; object-fit: cover; transition: 0.5s; }
        .card:hover .card-img { transform: scale(1.05); }
        .badge { position: absolute; top: 15px; left: 15px; padding: 5px 10px; border-radius: 4px; color: white; font-weight: 700; font-size: 0.75rem; text-transform: uppercase; }
        .bg-new { background: var(--brand-red); }
        .bg-excl { background: var(--brand-blue); }
        .card-body { padding: 20px; flex: 1; display: flex; flex-direction: column; }
        .card-price { color: var(--brand-blue); font-size: 1.4rem; font-weight: 800; margin-bottom: 5px; }
        .card-title { font-weight: 700; margin-bottom: 10px; line-height: 1.3; font-size: 1.1rem; }
        .card-meta { margin-top: auto; padding-top: 15px; border-top: 1px solid #eee; display: flex; justify-content: space-between; font-size: 0.9rem; color: var(--text-light); }

        /* --- AGENTS --- */
        .agent-grid-responsive { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 30px; }
        .agent-card { 
            text-align: center; padding: 20px; background: white; border-radius: var(--radius); 
            border: 1px solid #eee; transition: 0.3s; display: flex; flex-direction: column; align-items: center; 
            opacity: 0; transform: translateY(20px); transition: 0.4s ease;
        }
        .agent-card.visible { opacity: 1; transform: translateY(0); }
        .agent-card:hover { border-color: var(--brand-blue); box-shadow: var(--shadow); transform: translateY(-5px); }
        .agent-img { width: 100px; height: 100px; border-radius: 50%; object-fit: cover; margin-bottom: 15px; border: 3px solid var(--brand-red); background: #eee; }
        .agent-name { font-size: 1.1rem; font-weight: 700; color: var(--brand-blue); }
        .agent-role { color: var(--text-light); font-size: 0.8rem; margin-bottom: 10px; font-weight: 600; }
        .agent-area { font-size: 0.8rem; color: #666; margin-bottom: 15px; }

        /* --- CAREER & BLOG --- */
        .career-hero { background: var(--brand-blue); color: white; padding: 60px 0; text-align: center; }
        .job-list { margin-top: 40px; }
        .job-item { 
            display: flex; justify-content: space-between; align-items: center; 
            padding: 25px; background: white; border: 1px solid #eee; 
            margin-bottom: 15px; border-radius: var(--radius); 
            transition: 0.3s;
        }
        .job-item:hover { border-color: var(--brand-red); box-shadow: var(--shadow); transform: translateX(5px); }

        .blog-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 30px; }
        .blog-card { background: white; border-radius: var(--radius); overflow: hidden; border: 1px solid #eee; cursor: pointer; transition: 0.3s; display:flex; flex-direction:column; }
        .blog-content { padding: 20px; flex:1; display:flex; flex-direction:column; }
        .blog-read-more { margin-top: auto; color: var(--brand-red); font-weight: 700; font-size: 0.9rem; padding-top: 15px; }

        /* --- FORMS & SUCCESS --- */
        .success-box { text-align: center; padding: 40px; animation: scaleIn 0.4s ease; }
        .success-icon { font-size: 3rem; color: var(--success-color); margin-bottom: 15px; }

        /* --- MODALS --- */
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 2000; display: none; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .modal-container { background: white; width: 95%; max-width: 1100px; height: 90vh; border-radius: var(--radius); overflow: hidden; display: flex; flex-direction: column; position: relative; }
        .modal-container.small { max-width: 600px; height: auto; max-height: 90vh; } 
        .modal-close { position: absolute; top: 15px; right: 15px; background: white; width: 44px; height: 44px; border-radius: 50%; display: flex; justify-content: center; align-items: center; cursor: pointer; z-index: 10; font-size: 1.5rem; transition: 0.3s; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .modal-close:hover { background: var(--brand-red); color: white; }
        .modal-body-split { display: grid; grid-template-columns: 1.5fr 1fr; height: 100%; overflow: hidden; }
        .modal-body-single { padding: 30px; overflow-y: auto; max-height: 100%; }
        .modal-scroll { padding: 30px; overflow-y: auto; }
        .modal-img { width: 100%; height: 100%; object-fit: cover; }
        
        .detail-agent-box { margin-top: 30px; padding: 20px; border: 1px solid #eee; border-radius: var(--radius); display: flex; align-items: center; gap: 15px; background: #f9f9f9; }
        .detail-agent-img { width: 60px; height: 60px; border-radius: 50%; object-fit: cover; }

        .filter-panel { background: white; padding: 20px; border-radius: var(--radius); box-shadow: var(--shadow); margin-bottom: 40px; display: grid; grid-template-columns: 1fr 1fr 1fr auto; gap: 15px; align-items: end; }

        /* Calc */
        .calc-wrapper { background: #fff; border: 1px solid #e5e7eb; padding: 0; border-radius: var(--radius); margin-top: 30px; overflow: hidden; }
        .bank-list-item { display:flex; justify-content:space-between; align-items:center; padding:15px; border-bottom:1px solid #eee; }
        .bank-list-item:hover { background: #f9f9f9; }
        .bank-logo { width:30px; height:30px; border-radius:50%; display:flex; align-items:center; justify-content:center; color:white; font-size:0.7rem; font-weight:700; }
        .range-slider { width: 100%; margin-top: 5px; accent-color: var(--brand-blue); }

        /* Footer */
        .trust-facts { display: flex; justify-content: center; gap: 40px; margin-bottom: 40px; flex-wrap: wrap; }
        .trust-facts span { font-weight: 700; color: #ccc; display: flex; align-items: center; gap: 10px; font-size: 1.1rem; }
        .trust-facts i { color: var(--brand-red); }

        /* Success inside modal */
        .modal-success-state {
            text-align: center; padding: 40px; display: none; opacity: 0;
            flex-direction: column; align-items: center; justify-content: center; height: 100%;
            animation: fadeIn 0.5s ease forwards;
        }
        .modal-success-state.active { display: flex; }
        .success-checkmark { font-size: 4rem; color: var(--success-color); margin-bottom: 20px; animation: scaleIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }

        /* Spinner for feedback */
        .spinner { border: 4px solid #f3f3f3; border-top: 4px solid var(--brand-blue); border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        @media (max-width: 900px) {
            .main-menu { display: none; }
            .mobile-toggle { display: block; }
            .modal-body-split { grid-template-columns: 1fr; }
            .modal-img { height: 250px; }
            .modal-container { height: 100vh; width: 100%; border-radius: 0; }
            .hero h1 { font-size: 2.2rem; }
            .hero-balloon { width: 80px; top: 10%; right: 5%; }
            .filter-panel, .listing-grid, .blog-grid, .agent-grid-responsive { grid-template-columns: 1fr !important; }
            .container { padding: 0 15px; }
            .sell-hero-grid { grid-template-columns: 1fr !important; }
            .job-item { flex-direction: column; align-items: flex-start; text-align: left; }
            .job-item button { width: 100%; margin-top: 10px; }
            header .btn-primary { display: none; }
            .btn { padding: 14px 22px; font-size: 1rem; }
            .trust-facts { gap: 20px; flex-direction: column; text-align: center; }
            
            /* Banner Mobile */
            .promo-banner { flex-direction: column; text-align: center; margin: 40px 15px; }
            .promo-image { width: 100%; height: 200px; clip-path: polygon(0 0, 100% 0, 100% 85%, 0% 100%); }
            .promo-text-content { padding: 30px 20px; }
        }
    </style>
</head>
<body>

    <div id="toast-container"></div>

    <header>
        <div class="container nav-container">
            <a href="#" onclick="router('home')" class="logo">
                <svg viewBox="0 0 152 192" xmlns="http://www.w3.org/2000/svg">
                    <path fill="#003DA5" d="M76 0C34 0 0 34 0 76c0 42 34 76 76 76s76-34 76-76C152 34 118 0 76 0z"/>
                    <path fill="#DC1C2E" d="M76 152c-16 0-31-5-43-14l33 49c3 4 8 4 10 0l33-49c-12 9-27 14-43 14z"/>
                    <path fill="#FFF" d="M36 76h80v12H36z"/>
                </svg>
                RE/MAX <span>Slovakia</span>
            </a>
            <nav class="main-menu">
                <a href="#" onclick="router('buy')" class="menu-link" data-target="buy">Kúpa</a>
                <a href="#" onclick="router('sell')" class="menu-link" data-target="sell">Predaj</a>
                <a href="#" onclick="router('agents')" class="menu-link" data-target="agents">Makléri</a>
                <a href="#" onclick="router('career')" class="menu-link" data-target="career">Kariéra</a>
                <a href="#" onclick="router('blog')" class="menu-link" data-target="blog">Blog</a>
            </nav>
            <div class="mobile-toggle" onclick="toggleMobileMenu()"><i class="fas fa-bars"></i></div>
            <a href="#" onclick="router('sell')" class="btn btn-primary main-menu-btn">Chcem predať</a>
        </div>
    </header>

    <div class="mobile-nav-overlay" id="mobile-nav">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <div class="logo">RE/MAX</div>
            <i class="fas fa-times" onclick="toggleMobileMenu()" style="font-size:1.5rem; padding:10px;"></i>
        </div>
        <div class="mobile-nav-links">
            <a href="#" onclick="router('home'); toggleMobileMenu()">Domov</a>
            <a href="#" onclick="router('buy'); toggleMobileMenu()">Kúpa</a>
            <a href="#" onclick="router('sell'); toggleMobileMenu()">Predaj</a>
            <a href="#" onclick="router('agents'); toggleMobileMenu()">Makléri</a>
            <a href="#" onclick="router('career'); toggleMobileMenu()">Kariéra</a>
            <a href="#" onclick="router('blog'); toggleMobileMenu()">Blog</a>
        </div>
        <div style="margin-top:auto;">
            <button onclick="router('sell'); toggleMobileMenu()" class="btn btn-primary" style="width:100%;">Chcem predať</button>
        </div>
    </div>

    <section id="page-home" class="page-section">
        <div class="hero">
            <svg class="hero-balloon" viewBox="0 0 152 192"><path fill="#003DA5" d="M76 0C34 0 0 34 0 76c0 42 34 76 76 76s76-34 76-76C152 34 118 0 76 0z"/><path fill="#DC1C2E" d="M76 152c-16 0-31-5-43-14l33 49c3 4 8 4 10 0l33-49c-12 9-27 14-43 14z"/><path fill="#FFF" d="M36 76h80v12H36z"/></svg>
            <div class="container" style="position:relative; z-index:2;">
                <h1>Realitné služby<br>svetovej úrovne</h1>
                <p style="margin-bottom: 30px; font-size: 1.2rem;">Najväčšia sieť maklérov, overené nehnuteľnosti a bezpečnosť.</p>
                <div style="display:flex; justify-content:center; gap:20px; flex-wrap:wrap;">
                    <button onclick="router('buy')" class="btn btn-primary">Hľadať nehnuteľnosť</button>
                    <button onclick="router('sell')" class="btn btn-outline" style="color:white; border-color:white;">Chcem predať</button>
                </div>
            </div>
        </div>
        
        <div class="container" style="padding: 60px 0; text-align: center;">
            <h2 style="margin-bottom: 40px;">Prečo si vybrať RE/MAX?</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 40px; margin-bottom:60px;">
                <div>
                    <i class="fas fa-globe-americas" style="font-size: 3rem; color: var(--brand-blue); margin-bottom: 20px;"></i>
                    <h3>Globálna sieť</h3>
                    <p style="color:#666;">Pôsobíme vo viac ako 110 krajinách sveta.</p>
                </div>
                <div>
                    <i class="fas fa-user-check" style="font-size: 3rem; color: var(--brand-red); margin-bottom: 20px;"></i>
                    <h3>Overení makléri</h3>
                    <p style="color:#666;">Najlepšie školení experti na trhu s etickým kódexom.</p>
                </div>
                <div>
                    <i class="fas fa-balance-scale" style="font-size: 3rem; color: var(--brand-blue); margin-bottom: 20px;"></i>
                    <h3>Právna istota</h3>
                    <p style="color:#666;">Garantujeme 100% bezpečnosť prevodu a úschovu peňazí.</p>
                </div>
            </div>

            <div class="promo-banner">
                <div class="promo-text-content" style="text-align: left;">
                    <h2>Predáme to skôr,<br>než si susedia všimnú,<br>že sa sťahujete.</h2>
                    <p>Nechajte starosti s predajom na nás. Vy si zatiaľ vyberajte farbu gauča do nového.</p>
                    <button onclick="router('sell')" class="btn btn-white" style="color:var(--brand-red); font-weight:800;">Chcem predať výhodne</button>
                </div>
                <div class="promo-image"></div>
            </div>

        </div>
    </section>

    <section id="page-buy" class="page-section hidden">
        <div class="container" style="padding-top: 40px;">
            <div class="filter-panel">
                <div><label style="font-size:0.8rem; font-weight:700; color:#888;">LOKALITA</label><input type="text" id="filter-loc" class="form-control" placeholder="Mesto..."></div>
                <div><label style="font-size:0.8rem; font-weight:700; color:#888;">TYP</label><select id="filter-type" class="form-control"><option value="all">Všetky</option><option value="Byt">Byt</option><option value="Dom">Dom</option><option value="Komerčné">Komerčné</option></select></div>
                <div><label style="font-size:0.8rem; font-weight:700; color:#888;">CENA DO</label><input type="number" id="filter-price" placeholder="€ limit" class="form-control"></div>
                <button onclick="applyFilters()" class="btn btn-secondary" style="width:100%">Filtrovať</button>
            </div>
            <h2 style="margin-bottom: 20px;">Aktuálna ponuka <span id="prop-count" style="font-size:1rem; font-weight:400; color:#666;"></span></h2>
            <div class="listing-grid" id="buy-grid"></div>
        </div>
    </section>

    <section id="page-sell" class="page-section hidden">
        <div style="background: var(--brand-blue); color: white; padding: 60px 0;">
            <div class="container sell-hero-grid" style="display:grid; grid-template-columns: 1fr 1fr; gap:50px; align-items:center;">
                <div>
                    <h1 style="color:white; font-size: 2.5rem;">Predajte s najlepšími.</h1>
                    <p style="margin-bottom: 30px; font-size:1.1rem; opacity:0.9;">Získajte pre svoju nehnuteľnosť maximálnu trhovú cenu.</p>
                    <ul style="margin-bottom:30px; line-height:2;">
                        <li><i class="fas fa-check" style="color:var(--brand-red)"></i> Profesionálne fotenie a video</li>
                        <li><i class="fas fa-check" style="color:var(--brand-red)"></i> Homestaging v cene</li>
                        <li><i class="fas fa-check" style="color:var(--brand-red)"></i> Marketing na sociálnych sieťach</li>
                    </ul>
                </div>
                <div id="sell-form-container" style="background: rgba(255,255,255,0.1); padding: 30px; border-radius: var(--radius); backdrop-filter: blur(5px);">
                    <h3 style="color:white; margin-bottom:20px;">Nezáväzná konzultácia</h3>
                    <form onsubmit="submitSellForm(event)">
                        <select class="form-control" required style="margin-bottom:15px; border:none; padding:12px;">
                            <option value="" disabled selected>Typ nehnuteľnosti</option>
                            <option value="Byt">Byt</option>
                            <option value="Dom">Dom</option>
                            <option value="Pozemok">Pozemok</option>
                            <option value="Komerčné">Komerčné</option>
                        </select>
                        <input type="text" placeholder="Mesto nehnuteľnosti" class="form-control" required style="margin-bottom:15px; border:none;">
                        <input type="text" placeholder="Vaše meno" class="form-control" required style="margin-bottom:15px; border:none;">
                        <input type="tel" placeholder="Telefón" class="form-control" required style="margin-bottom:15px; border:none;">
                        <button type="submit" class="btn btn-white" style="background:white; color:var(--brand-blue); width:100%; font-weight:800;">Odoslať dopyt</button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <section id="page-agents" class="page-section hidden">
        <div class="container" style="padding: 60px 0;">
            <div class="text-center" style="margin-bottom: 50px;">
                <h2>Naši realitní experti</h2>
                <p>Vyberte si odborníka vo vašom regióne.</p>
            </div>
            <div style="max-width:400px;margin:0 auto 40px;">
                <input type="text" id="agent-search" placeholder="Hľadať podľa mesta..." class="form-control" oninput="filterAgents()">
                <div id="agent-count" style="text-align:center;margin-top:10px;color:#666;"></div>
            </div>
            <div class="listing-grid agent-grid-responsive" id="agents-grid"></div>
        </div>
    </section>

    <section id="page-career" class="page-section hidden">
        <div class="career-hero"><div class="container"><h1>Staňte sa hviezdou<br>realitného biznisu</h1></div></div>
        <div class="container" style="padding: 60px 0;">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 40px;">
                <div>
                    <h2>Čo ponúkame?</h2>
                    <ul style="margin-top:20px; line-height:2;">
                        <li><i class="fas fa-check" style="color:var(--brand-red)"></i> Až 80% provízie</li>
                        <li><i class="fas fa-check" style="color:var(--brand-red)"></i> Vlastná Akadémia zdarma</li>
                        <li><i class="fas fa-check" style="color:var(--brand-red)"></i> Flexibilný čas</li>
                    </ul>
                </div>
                <div><h2>Otvorené pozície</h2><div class="job-list" id="career-list"></div></div>
            </div>
        </div>
    </section>

    <section id="page-blog" class="page-section hidden">
        <div class="container" style="padding: 60px 0;">
            <h2 style="margin-bottom: 40px;">Magazín o bývaní</h2>
            <div class="blog-grid" id="blog-grid"></div>
        </div>
    </section>

    <footer style="background: #111; color: white; padding: 60px 0 20px; margin-top: 60px;">
        <div class="container">
            <div class="trust-facts">
                <span><i class="fas fa-globe"></i> 110+ krajín</span>
                <span><i class="fas fa-users"></i> 140 000+ maklérov</span>
                <span><i class="fas fa-home"></i> #1 vo svete realít</span>
            </div>
            <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 40px; margin-bottom: 40px; border-top: 1px solid #333; padding-top: 40px;">
                <div>
                    <h4 style="color:white; margin-bottom:20px;">RE/MAX Slovakia</h4>
                    <p style="color:#888; font-size:0.9rem;">Spájame ľudí s ich vysnívaným bývaním už viac ako 45 rokov.</p>
                </div>
                <div>
                    <h4 style="color:white; margin-bottom:20px;">Rýchle odkazy</h4>
                    <ul style="color:#888; font-size:0.9rem; line-height:2;">
                        <li><a href="#" onclick="router('buy')">Kúpa nehnuteľnosti</a></li>
                        <li><a href="#" onclick="router('sell')">Predaj nehnuteľnosti</a></li>
                        <li><a href="#" onclick="router('agents')">Naši makléri</a></li>
                    </ul>
                </div>
                <div>
                    <h4 style="color:white; margin-bottom:20px;">Kontakt</h4>
                    <p style="color:#888; font-size:0.9rem;">
                        <i class="fas fa-phone" style="color:var(--brand-red)"></i> +421 900 111 222<br>
                        <i class="fas fa-envelope" style="color:var(--brand-red)"></i> info@remax.sk
                    </p>
                </div>
            </div>
            <div style="border-top:1px solid #333; padding-top:20px; text-align:center; font-size:0.8rem; color:#666;">
                RE/MAX Slovakia © 2025. Všetky práva vyhradené. Each Office Independently Owned and Operated.
            </div>
        </div>
    </footer>

    <div class="modal-overlay" id="detail-modal">
        <div class="modal-container">
            <div class="modal-close" onclick="closeModal('detail-modal')">&times;</div>
            <div class="modal-body-split">
                <div style="background:#000;"><img id="m-img" class="modal-img" src="" alt="Property" loading="lazy" onerror="this.src='https://images.unsplash.com/photo-1560518883-ce09059eeffa?q=80&w=600'"></div>
                <div class="modal-scroll">
                    <span id="m-badge" class="badge bg-excl" style="position:static; display:inline-block; margin-bottom:10px;">EXKLUZÍVNE</span>
                    <h2 id="m-title" style="margin-bottom: 5px;">Title</h2>
                    <div id="m-loc" style="color:#666; margin-bottom: 15px;">Loc</div>
                    <div id="m-price" style="color:var(--brand-red); font-size:2rem; font-weight:800; font-family:'Montserrat'; margin-bottom:20px;">€ 0</div>
                    <div style="display:flex; gap:20px; border-bottom:1px solid #eee; padding-bottom:20px; margin-bottom:20px;">
                        <div><i class="fas fa-ruler-combined" style="color:var(--brand-blue)"></i> <span id="m-area">0 m²</span></div>
                        <div><i class="fas fa-bed" style="color:var(--brand-blue)"></i> <span id="m-rooms">0</span> izb.</div>
                    </div>
                    <p id="m-desc" style="color:#555; margin-bottom:30px;">Desc...</p>
                    
                    <div class="detail-agent-box">
                        <img id="d-agent-img" src="" class="detail-agent-img" loading="lazy">
                        <div>
                            <div id="d-agent-name" style="font-weight:700; color:var(--brand-blue);">Agent</div>
                            <div id="d-agent-role" style="font-size:0.85rem; color:#666;">Role</div>
                            <button id="d-contact-btn" class="btn btn-outline" style="margin-top:5px; padding:5px 15px; font-size:0.75rem;">Kontaktovať</button>
                        </div>
                    </div>

                    <div class="calc-wrapper">
                        <div style="background:#f8f9fa; padding:15px; border-bottom:1px solid #eee;">
                            <h4 style="font-size:1rem; margin-bottom:10px;"><i class="fas fa-university"></i> Porovnanie hypoték</h4>
                            <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
                                <div><label style="font-size:0.7rem; font-weight:700; color:#888;">CENA</label><div id="calc-price-display" style="font-weight:700;">€ 0</div></div>
                                <div><label style="font-size:0.7rem; font-weight:700; color:#888;">VLASTNÉ (<span id="own-perc">20</span>%)</label><input type="range" min="0" max="50" value="20" step="5" class="range-slider" id="calc-own" oninput="calculateMortgage()"></div>
                            </div>
                            <div style="margin-top:10px;"><label style="font-size:0.7rem; font-weight:700; color:#888;">DOBA: <span id="years-display">30</span>r</label><input type="range" min="5" max="30" value="30" class="range-slider" id="calc-years" oninput="calculateMortgage()"></div>
                        </div>
                        <div id="bank-results" style="max-height:200px; overflow-y:auto;"></div>
                        <div style="background:#f0f9ff; padding:8px; font-size:0.65rem; color:#0c4a6e; text-align:center; border-top:1px solid #bae6fd;">Výpočet je orientačný a nemá charakter záväznej ponuky.</div>
                    </div>

                    <div style="margin-top:30px;">
                        <button class="btn btn-primary" style="width:100%;">Dohodnúť obhliadku</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="contact-agent-modal">
        <div class="modal-container small">
            <div class="modal-close" onclick="closeModal('contact-agent-modal')">&times;</div>
            
            <div class="modal-body-single" id="contact-agent-form">
                <h3 style="margin-bottom:10px;">Kontaktovať makléra</h3>
                <div style="background:#f4f6f8; padding:15px; border-radius:4px; margin-bottom:20px; font-size:0.9rem;">
                    <strong>Maklér:</strong> <span id="c-agent-name"></span><br>
                    <span id="c-prop-title" style="color:#666;"></span>
                </div>
                <form onsubmit="submitContactForm(event)">
                    <input type="text" placeholder="Meno" class="form-control" required style="margin-bottom:10px;">
                    <input type="email" placeholder="Email" class="form-control" required style="margin-bottom:10px;">
                    <input type="tel" placeholder="Telefón" class="form-control" required style="margin-bottom:10px;">
                    <textarea class="form-control" rows="3" placeholder="Správa..."></textarea>
                    <button type="submit" class="btn btn-secondary" style="width:100%; margin-top:15px;">Odoslať</button>
                </form>
            </div>
            
            <div class="modal-success-state" id="contact-agent-success">
                <div class="success-checkmark"><i class="fas fa-check-circle"></i></div>
                <h3>Správa odoslaná!</h3>
                <p style="color:#666; margin-bottom:20px;">Maklér vás bude čoskoro kontaktovať.</p>
                <button class="btn btn-outline" onclick="closeModal('contact-agent-modal')">Zavrieť</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="career-modal">
        <div class="modal-container small">
            <div class="modal-close" onclick="closeModal('career-modal')">&times;</div>
            
            <div class="modal-body-single" id="career-form">
                <h3 style="margin-bottom:5px;">Aplikovať</h3>
                <h4 id="career-target-title" style="color:#666; margin-bottom:20px;">Pozícia</h4>
                <form onsubmit="submitCareer(event)">
                    <input type="text" placeholder="Meno" class="form-control" required style="margin-bottom:10px;">
                    <input type="email" placeholder="Email" class="form-control" required style="margin-bottom:10px;">
                    <input type="tel" placeholder="Telefón" class="form-control" required style="margin-bottom:10px;">
                    <div style="margin-bottom:15px;">
                        <label style="font-size:0.75rem; font-weight:700; color:#888;">ŽIVOTOPIS (PDF)</label>
                        <input type="file" class="form-control" accept=".pdf,.doc" required>
                    </div>
                    <button type="submit" class="btn btn-secondary" style="width:100%;">Odoslať</button>
                </form>
            </div>

            <div class="modal-success-state" id="career-success">
                <div class="success-checkmark"><i class="fas fa-check-circle"></i></div>
                <h3>Ďakujeme!</h3>
                <p style="color:#666; margin-bottom:20px;">Vašu žiadosť sme prijali. Ozveme sa vám.</p>
                <button class="btn btn-outline" onclick="closeModal('career-modal')">Zavrieť</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="blog-modal">
        <div class="modal-container small">
            <div class="modal-close" onclick="closeModal('blog-modal')">&times;</div>
            <div class="modal-body-single"><div style="margin-bottom:10px; color:#888;" id="b-date"></div><h2 id="b-title" style="margin-bottom:20px;"></h2><img id="b-img" src="" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;" loading="lazy"><div id="b-content" style="line-height:1.8; color:#333;"></div></div>
        </div>
    </div>

    <script>
        // --- JS LOGIC ---
        function showToast(msg) {
            const container = document.getElementById('toast-container');
            const el = document.createElement('div');
            el.className = 'toast';
            el.innerHTML = `<i class="fas fa-check-circle"></i> ${msg}`;
            container.appendChild(el);
            setTimeout(() => { el.classList.add('hide'); setTimeout(() => el.remove(), 400); }, 3000);
        }

        const agentNamesList = [
            "Ing. Peter Novák – Senior realitný maklér – Bratislava", "Mgr. Jana Kováčová – Realitná špecialistka – Košice", "Martin Horváth – Investičný poradca – Žilina", "Silvia Malá – Maklérka pre novostavby – Trnava", "Tomáš Benko – Realitný maklér – Nitra", "Lucia Vargová – Prémiové nehnuteľnosti – Bratislava", "Michal Štefaník – Realitný konzultant – Trenčín", "Zuzana Poláková – Bytový špecialista – Banská Bystrica", "Andrej Mikula – Investície & prenájmy – Bratislava", "Katarína Urbanová – Rezidenčné nehnuteľnosti – Prešov", "Jozef Tóth – Senior maklér – Komárno", "Lenka Hudecová – Realitná poradkyňa – Martin", "Róbert Blaško – Komerčné priestory – Bratislava", "Monika Králiková – Novostavby – Pezinok", "Pavol Greško – Vidiecke nehnuteľnosti – Levice", "Ivana Richterová – Luxusné bývanie – Bratislava", "Marek Blažej – Realitný maklér – Poprad", "Veronika Černá – Prenájmy – Bratislava", "Daniel Kmeť – Developerské projekty – Trnava", "Natália Kučerová – Realitná špecialistka – Zvolen", "Lukáš Baláž – Investičné nehnuteľnosti – Bratislava", "Petra Ondrejková – Bytový trh – Senec", "Roman Hruška – Senior maklér – Piešťany", "Adriana Farkašová – Rezidenčný predaj – Galanta", "Šimon Kováč – Mladý maklér – Bratislava", "Barbora Miháliková – Klientsky servis – Košice", "Erik Valach – Komerčné reality – Žilina", "Denisa Šimková – Realitná poradkyňa – Skalica", "Viktor Nemec – Investičný analytik – Bratislava", "Alexandra Bartošová – Nové projekty – Nitra", "Marek Janiga – Realitný maklér – Ružomberok", "Simona Lauková – Rezidenčný predaj – Bratislava", "František Hanák – Senior konzultant – Dunajská Streda", "Lucia Bieliková – Bytové portfólio – Bratislava", "Patrik Slanina – Prenájmy a správa – Trnava", "Miriam Holubová – Realitná maklérka – Považská Bystrica", "Jakub Kubík – Investície – Bratislava", "Kristína Zemanová – Rodinné domy – Malacky", "Norbert Kiss – Komerčné objekty – Šamorín", "Eva Liptáková – Realitná poradkyňa – Liptovský Mikuláš", "Adam Rybár – Realitný maklér – Bratislava", "Soňa Marková – Luxusné byty – Bratislava", "Peter Illéš – Developerské projekty – Komárno", "Michaela Šoltýsová – Rezidenčný trh – Košice", "Filip Macháč – Investičný špecialista – Trenčín", "Alena Bočková – Klientsky servis – Nové Zámky", "Martin Valenta – Rodinné domy – Topoľčany", "Nina Horská – Novostavby – Bratislava", "Boris Krajčír – Komerčné reality – Senica", "Tatiana Pavlíková – Realitná konzultantka – Prievidza", "Juraj Líška – Investície a prenájmy – Bratislava", "Veronika Jamrichová – Rezidenčný predaj – Myjava", "Samuel Pokorný – Junior maklér – Bratislava", "Iveta Drobná – Rodinné bývanie – Dolný Kubín", "Ondrej Kováčik – Realitný analytik – Bratislava", "Renáta Gajdošová – Bytový trh – Partizánske", "Marcel Krištof – Komerčné projekty – Žiar nad Hronom", "Laura Pavúková – Nové bývanie – Bratislava", "Denis Hlinka – Investičné reality – Pezinok", "Zora Švecová – Klientsky manažment – Levice", "Viktor Pažický – Senior maklér – Bratislava", "Kristína Majerová – Rezidenčné projekty – Trnava", "Matej Fiala – Realitný maklér – Holíč", "Anna Šalingová – Bytové portfólio – Košice", "Richard Páleš – Developerské spolupráce – Bratislava", "Nina Kubová – Prenájmy – Nitra", "Peter Bielek – Komerčné priestory – Žilina", "Dominika Hlaváčová – Realitná poradkyňa – Senec", "Igor Vician – Investičný konzultant – Bratislava", "Monika Zacharová – Novostavby – Banská Bystrica", "Jakub Pavlík – Junior realitný maklér – Bratislava", "Zdenka Hrušková – Rodinné domy – Kežmarok", "Oliver Križan – Realitné analýzy – Bratislava", "Paulína Šebo – Rezidenčný predaj – Skalica", "Milan Gonda – Senior maklér – Rimavská Sobota", "Natália Krupová – Klientsky servis – Bratislava", "Viktor Šural – Investície – Trnava", "Daniela Rácová – Realitná maklérka – Rožňava", "Tomáš Vaško – Komerčné projekty – Bratislava", "Beáta Hlinková – Prémiové bývanie – Bratislava"
        ];

        const allAgents = agentNamesList.map(item => {
            const parts = item.split(' – ');
            return { name: parts[0], role: parts[1], area: parts[2], img: `https://ui-avatars.com/api/?name=${parts[0].replace(" ", "+")}&background=0D8ABC&color=fff&size=200` };
        });

        const data = {
            properties: [],
            agents: allAgents,
            blog: [
                { id: 1, title: "Trh 2025", date: "Jan 2025", img: "1560518883-ce09059eeffa", desc: "Vývoj cien.", content: "<p>Ceny sa stabilizujú...</p>" },
                { id: 2, title: "Sprievodca kúpou", date: "Dec 2024", img: "1560520653-9e0e4c89eb11", desc: "Ako kúpiť bez stresu.", content: "<p>Postup pri kúpe...</p>" }
            ],
            jobs: [
                { title: "Senior Realitný Maklér", loc: "Bratislava • Full-time" },
                { title: "Office Manager", loc: "Košice • Part-time" },
                { title: "Hypotekárny špecialista", loc: "SR • Freelance" },
                { title: "Marketing", loc: "Bratislava • Full-time" },
                { title: "Junior Maklér", loc: "Trnava • Full-time" },
                { title: "Klientsky servis", loc: "Žilina • Part-time" }
            ]
        };

        const types = ["Byt", "Dom", "Komerčné"];
        const imgs = { 
            "Byt": ["1522708323590-d24dbb6b0267", "1502672260266-1c1ef2d93688", "1600607687939-ce8a6c25118c", "1633505412556-993d0774a048", "1560448204-e02f11c3d0e2", "1484154218962-a1c00475a528", "1545324418-cc1a3fa10c00", "1512917774080-9991f1c4c750", "1515263487990-61afc4f89245", "1586023911250-9261990bae15", "1560185009-dddeb820c7b7"], 
            "Dom": ["1600596542815-2495db98dada", "1613490493576-2f50331579aa", "1564013799919-ab600027ffc6", "1583608205776-bfd35f0d9f74", "1568605117036-5fe5e7bab0b7", "1570129477492-45c003edd2be", "1599809272520-2786a56f5281", "1582268611958-ebfd161ef9cf", "1605276378663-877f9235bc78", "1600047509807-ba8f99d2cdde", "1593696140250-b5b035dd28ed"], 
            "Komerčné": ["1497366216548-37526070297c", "1554118811-1e0d58224f24", "1571266020586-749e798f0907", "1542889601-399c4f3a8402", "1510074377623-8cf13fb86c08"] 
        };

        for(let i=1; i<=50; i++) {
            const type = types[Math.floor(Math.random() * types.length)];
            const randomAgent = data.agents[Math.floor(Math.random() * data.agents.length)];
            const imgArray = imgs[type];
            // Random image from array to ensure variety
            const imgId = imgArray[Math.floor(Math.random() * imgArray.length)];
            
            data.properties.push({
                id: i, title: `${type} ${randomAgent.area}`, price: Math.floor(Math.random()*500000+100000), location: randomAgent.area,
                type: type, area: Math.floor(Math.random()*200+40), rooms: 3, img: `https://images.unsplash.com/photo-${imgId}?q=80&w=600&auto=format&fit=crop`,
                isNew: Math.random()>0.8, desc: "Exkluzívna ponuka.", agent: randomAgent
            });
        }

        // Router
        function router(pageId) {
            document.querySelectorAll('.page-section').forEach(sec => sec.classList.add('hidden'));
            document.querySelectorAll('.menu-link').forEach(link => link.classList.remove('active'));
            document.getElementById(`page-${pageId}`).classList.remove('hidden');
            const link = document.querySelector(`.menu-link[data-target="${pageId}"]`);
            if(link) link.classList.add('active');
            if(pageId==='buy') renderProperties(data.properties);
            if(pageId==='agents') renderAgents();
            if(pageId==='career') renderCareer();
            if(pageId==='blog') renderBlog();
            window.scrollTo(0,0);
        }
        function toggleMobileMenu() { document.getElementById('mobile-nav').classList.toggle('active'); }

        // Render
        function renderProperties(props) {
            const grid = document.getElementById('buy-grid');
            grid.innerHTML = "";
            document.getElementById('prop-count').innerText = `(${props.length})`;
            props.forEach(p => {
                const card = document.createElement('div'); card.className = 'card';
                card.onclick = () => openDetail(p);
                card.innerHTML = `<div class="card-img-wrap"><img src="${p.img}" class="card-img" loading="lazy" onerror="this.src='https://images.unsplash.com/photo-1560518883-ce09059eeffa?q=80&w=600'">${p.isNew?'<span class="badge bg-new">NOVINKA</span>':''}</div><div class="card-body"><div class="card-price">${formatPrice(p.price)}</div><h3 class="card-title">${p.title}</h3><div class="card-meta"><span>${p.location}</span><span>${p.area} m²</span></div></div>`;
                grid.appendChild(card);
            });
        }
        function renderAgents(list = data.agents) {
            const grid = document.getElementById('agents-grid'); grid.innerHTML = "";
            list.forEach(a => {
                const card = document.createElement('div'); card.className = 'agent-card';
                setTimeout(() => card.classList.add('visible'), 100);
                card.innerHTML = `<img src="${a.img}" class="agent-img" loading="lazy"><div class="agent-name">${a.name}</div><div class="agent-role">${a.role}</div><div class="agent-area">${a.area}</div><button class="btn btn-outline" style="margin-top:10px; font-size:0.8rem;" onclick="openContactAgentModal('${a.name}', 'Profil makléra')">Kontaktovať</button>`;
                grid.appendChild(card);
            });
            lazyLoadAgents();
        }
        function filterAgents() {
            clearTimeout(window.agentTimeout);
            window.agentTimeout = setTimeout(() => {
                const val = document.getElementById('agent-search').value.toLowerCase();
                const filtered = data.agents.filter(a => a.area.toLowerCase().includes(val) || a.name.toLowerCase().includes(val));
                document.getElementById('agent-count').innerText = `Nájdených: ${filtered.length}`;
                renderAgents(filtered);
            }, 250);
        }
        function lazyLoadAgents() {
            const cards = document.querySelectorAll('.agent-card');
            const observer = new IntersectionObserver(entries => {
                entries.forEach(entry => { if(entry.isIntersecting) { entry.target.classList.add('visible'); observer.unobserve(entry.target); } });
            }, {threshold: 0.1});
            cards.forEach(card => observer.observe(card));
        }

        function renderCareer() {
            const list = document.getElementById('career-list'); if(list.innerHTML!=="") return;
            data.jobs.forEach(j => {
                const item = document.createElement('div'); item.className='job-item';
                item.innerHTML=`<div><h4>${j.title}</h4><span>${j.loc}</span></div><button class="btn btn-outline" onclick="openCareerModal('${j.title}')" style="font-size:0.8rem;">Aplikovať</button>`;
                list.appendChild(item);
            });
        }
        function renderBlog() {
            const grid = document.getElementById('blog-grid'); if(grid.innerHTML!=="") return;
            data.blog.forEach(b => {
                const card = document.createElement('div'); card.className='blog-card'; card.onclick=()=>openBlogDetail(b.id);
                card.innerHTML=`<img src="https://images.unsplash.com/photo-${b.img}?q=80&w=600" style="width:100%;height:200px;object-fit:cover;"><div class="blog-content"><div class="blog-date">${b.date}</div><h3>${b.title}</h3></div>`;
                grid.appendChild(card);
            });
        }

        // --- NEW CENTRALIZED CLOSE MODAL LOGIC (FIXES SCROLL) ---
        function closeAnyModal(modal) {
            if (!modal) return;
            modal.style.display = 'none';
            // Force unlock scroll
            document.body.style.overflow = '';
        }

        function closeModal(id) { 
            closeAnyModal(document.getElementById(id));
        }

        let currentPrice = 0;
        function openDetail(p) {
            currentPrice = p.price;
            document.getElementById('m-img').src = p.img; document.getElementById('m-title').innerText = p.title;
            document.getElementById('m-price').innerText = formatPrice(p.price); document.getElementById('m-loc').innerText = p.location;
            document.getElementById('m-area').innerText = p.area + " m²"; document.getElementById('m-rooms').innerText = p.rooms;
            document.getElementById('m-desc').innerText = p.desc; document.getElementById('calc-price-display').innerText = formatPrice(p.price);
            
            // Agent
            document.getElementById('d-agent-name').innerText = p.agent.name; document.getElementById('d-agent-role').innerText = p.agent.role;
            document.getElementById('d-agent-img').src = p.agent.img;
            document.getElementById('d-contact-btn').onclick = function() { openContactAgentModal(p.agent.name, p.title); };

            document.getElementById('calc-own').value = 20; calculateMortgage();
            
            document.body.style.overflow = 'hidden'; // Lock scroll
            document.getElementById('detail-modal').style.display = 'flex'; 
        }
        
        function openContactAgentModal(name, subject) {
            document.body.style.overflow = 'hidden';
            document.getElementById('contact-agent-form').style.display = 'block';
            document.getElementById('contact-agent-success').classList.remove('active');
            document.getElementById('c-agent-name').innerText = name; document.getElementById('c-prop-title').innerText = subject;
            document.getElementById('contact-agent-modal').style.display = 'flex';
        }
        function submitContactForm(e) {
            e.preventDefault(); 
            document.getElementById('contact-agent-form').style.display = 'none';
            document.getElementById('contact-agent-success').classList.add('active');
            showToast("Správa bola úspešne odoslaná.");
        }
        
        function openCareerModal(title) { 
            document.body.style.overflow = 'hidden';
            document.getElementById('career-form').style.display = 'block';
            document.getElementById('career-success').classList.remove('active');
            document.getElementById('career-target-title').innerText = title; 
            document.getElementById('career-modal').style.display = 'flex'; 
        }
        function submitCareer(e) {
            e.preventDefault(); 
            document.getElementById('career-form').style.display = 'none';
            document.getElementById('career-success').classList.add('active');
        }
        
        function openBlogDetail(id) {
            const a = data.blog.find(b=>b.id===id);
            document.getElementById('b-title').innerText=a.title; document.getElementById('b-date').innerText=a.date;
            document.getElementById('b-img').src=`https://images.unsplash.com/photo-${a.img}?q=80&w=800`; document.getElementById('b-content').innerHTML=a.content;
            document.body.style.overflow = 'hidden';
            document.getElementById('blog-modal').style.display='flex';
        }

        function submitSellForm(e) {
            e.preventDefault(); 
            e.target.reset();
            showToast("Správa bola úspešne odoslaná.");
        }
        
        // Bank Calc
        const banksDB = [
            { name: "UniCredit", rate: 4.19, color: "#E20613", logo: "UC" }, { name: "SLSP", rate: 4.49, color: "#007AC2", logo: "SL" },
            { name: "Tatra", rate: 4.49, color: "#000", logo: "TB" }, { name: "VÚB", rate: 4.59, color: "#F7941D", logo: "VB" }
        ];
        function calculateMortgage() {
            const ownPerc = document.getElementById('calc-own').value; const years = document.getElementById('calc-years').value;
            // FIX: Update labels
            document.getElementById('own-perc').innerText = ownPerc; document.getElementById('years-display').innerText = years;
            
            const loan = currentPrice * (1 - (ownPerc/100)); const months = years*12;
            let html = "";
            banksDB.sort((a,b)=>a.rate-b.rate).forEach((b,i) => {
                const r = (b.rate/100)/12; const pay = (loan*r)/(1-Math.pow(1+r, -months));
                html += `<div class="bank-list-item"><div style="display:flex;align-items:center;gap:10px;"><div class="bank-logo" style="background:${b.color}">${b.logo}</div><div><div style="font-weight:700;font-size:0.9rem;">${b.name}</div><div style="font-size:0.7rem;">${b.rate}%</div></div></div><div style="font-weight:700; color:var(--brand-blue);">${formatPrice(pay).replace('€','')}€</div></div>`;
            });
            document.getElementById('bank-results').innerHTML = html;
        }

        function formatPrice(n) { return new Intl.NumberFormat('sk-SK', {style:'currency', currency:'EUR', maximumFractionDigits:0}).format(n); }
        function applyFilters() { renderProperties(data.properties); /* Simple dummy filter */ }

        // --- GLOBAL CLOSE HANDLER (FIXED) ---
        window.addEventListener('click', function (e) {
            if (e.target.classList.contains('modal-overlay')) {
                closeAnyModal(e.target);
            }
        });

        // Esc key to close
        document.addEventListener('keydown', function (e) {
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal-overlay').forEach(modal => {
                    if (getComputedStyle(modal).display === 'flex') {
                        closeAnyModal(modal);
                    }
                });
            }
        });
        
        router(window.location.hash.replace('#','') || 'home');

        // Anti-theft
        document.addEventListener('contextmenu', e => e.preventDefault());
        document.onkeydown = e => { if(e.keyCode==123 || (e.ctrlKey && e.keyCode==85)) return false; };
        document.querySelectorAll('img').forEach(i => i.setAttribute('draggable', false));
    </script>
</body>
</html>
